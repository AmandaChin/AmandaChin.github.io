---
layout:     post
title:      《广告算法》学习笔记
subtitle:   非搜索广告之定向广告1
date:       2019-05-19
author:     Ann
header-img: img/post-bg-coffee.jpeg
catalog: true
tags:
    - 广告算法
    - 学习笔记
    - 机器学习
---
# 定向广告

<div class="mermaid">
graph LR;
　　 A(定向广告)-.->B[上下文定向]
    A-.->C[受众定向]
    A-.->D[行为定向]
    C -.-> E1[根据用户背景资料定向]
    C -.-> E2[根据用户行为定向]
    E2 -.-> 有监督的定向算法
    E2 -.-> 无监督的定向算法
</div>


## 上下文定向

指根据页面的内容来投放相应的广告

这主要通过<font color='#1E90FF'> 内容提供商自定义，页面关键字提取，网页聚类 </font>三种方式实现。

## 受众定向
### 根据用户背景资料定向
略

### 根据用户行为定向
通过用户的浏览行为来定向推送广告，这包括<font color='#98FB98'>搜索的关键字，在特定类目内容上的点击，浏览行为等。</font>

主要有两种预测用户行为的方式，一个是基于有监督算法的，另一个则是无监督的。

#### 有监督的定向算法

有监督的定向算法指预定义有限个兴趣点，预测用户可能属于哪个兴趣点。

- 常用**柏松回归模型**进行预测计算用户在每一个兴趣点上的兴趣度


柏松分布：

$$\frac{\lambda^y*e^{-\lambda}}{y!}$$

其中 $$\lambda$$ 取其均值 $$\lambda = w^Tx$$，其中w为待优化参数，x为特征向量。

则，似然函数为：

$$L(y|x;w) = \prod^m_{i=1}P(y^i|x^i;w)=\prod^m_{i=1}\frac{(w^Tx^i)^{y^i}*e^{-w^Tx^i}}{y^i!}$$

对数似然函数：

$$ln(L(y|x;w)) = \sum^m_{i=1}(y^i*ln(w^Tx^i)-(w^Tx^i)-ln(y^i!))$$

则损失函数为：

$$J(w) = -\frac{1}{m}\sum^m_{i=1}(y^i*ln(w^Tx^i)-(w^Tx^i))$$

梯度下降法，每次下降方向为：

$$\frac{\partial{J(w)}}{\partial{w}}$$

- 也可通过**用户的对该类型的预估CTR**来判断用户对兴趣点的兴趣度

$$CTR_{ik} = \frac{\lambda^{click}_{ik}+\alpha}{\lambda^{view}_{ik}+\beta} $$

上述公式表示用户i对类别k的CTR预估，其中$$\alpha,\beta$$是拉普拉斯平滑因子，当$$\lambda^{view}_{ik}$$很小时，认为CTR预估是不可信的，此时默认$$CTR_{ik} = \frac{\alpha}{\beta}$$。

#### 无监督的定向算法

无监督的定向算法指没有预定义标签，主要通过聚类的方式计算，首先需要将用户**向量化表示**，常用<font color='#1E90FF'> 基于item的向量表示法和基于query的向量表示法 </font>方式。

- 基于item表示法
    - 多用于电子商务方面的广告系统，根据用户的历史浏览、点击、购买和收藏等行为日志，将用户表示成item的向量。
- 基于query表示法(查询)
    - 多见于搜索引擎的广告系统中，通常的做法是将用户的历史query进行分词，同义词归一化等操作后，将用户表示成词的向量。

非监督的主题模型的发展经历了 LSA -> PLSA -> LDA 的过程，下面简单介绍这三种模型。

> 分享一篇笔记：[广告定向算法](http://wulc.me/2017/04/28/%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%E7%AC%94%E8%AE%B0(3)--%E5%8F%97%E4%BC%97%E5%AE%9A%E5%90%91/)

## 行为定向

根据用户的历史行为进行推荐，在不同场景下有不同的行为依据

- 电商平台
    - 用户对商品的浏览行为、收藏行为、搜索行为、加入购物车、购买行为等等
- 搜索平台
    - 用户对某些关键字的主动搜索，主动点击，以及用户对广告的点击等等 <font color='red'>并不是所有点击都有意义，需筛选</font> -----筛选依据？
- 社交平台
    - 用户的行为主要包括，互粉，转发，点赞，评论等等

emmmm,但是这一小节和上一节受众定向的用户行为有嘛区别？（挠头